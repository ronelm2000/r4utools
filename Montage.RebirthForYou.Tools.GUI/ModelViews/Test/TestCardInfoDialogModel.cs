using MessageBox.Avalonia.ViewModels;
using Montage.RebirthForYou.Tools.CLI.Entities;
using Montage.RebirthForYou.Tools.GUI.ModelViews;
using ReactiveUI;
using System;
using System.Collections.Generic;
using System.Text;
using System.Text.Json;

namespace Montage.RebirthForYou.Tools.GUI.ModelViews.Test
{
    public class TestCardInfoDialogModel : ViewModelBase
    {
        private R4UCard _cardContext;

        public R4UCard CardContext
        {
            get => _cardContext;
            set => this.RaiseAndSetIfChanged(ref _cardContext, value);
        }


        public string Serial => CardContext.Serial;
        public string AAA => "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";

        public TestCardInfoDialogModel()
        {
            CardContext = CreateTestCard();
        }


        private static R4UCard CreateTestCard()
        {
            var base64JSON = "ICAgIHsKICAgICAgIlNlcmlhbCI6ICJJTUMvMDAxVC0wMDEiLAogICAgICAiQWx0ZXJuYXRlcyI6IFsKICAgICAgICB7CiAgICAgICAgICAiU2VyaWFsIjogIklNQy8wMDFULTAwMVMiLAogICAgICAgICAgIlJhcml0eSI6ICJURFx1MDAyQiIsCiAgICAgICAgICAiSW1hZ2VzIjogWwogICAgICAgICAgICAiaHR0cHM6Ly9zMy1hcC1ub3J0aGVhc3QtMS5hbWF6b25hd3MuY29tL3JlYmlydGgtZnkuY29tL3dvcmRwcmVzcy93cC1jb250ZW50L2ltYWdlcy9jYXJkbGlzdC9JTVREL2ltYzAwMXQtMDAxcy5wbmciCiAgICAgICAgICBdCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICAiU2VyaWFsIjogIklNQy8wMDFULTAwMVNOIiwKICAgICAgICAgICJSYXJpdHkiOiAiU05SIiwKICAgICAgICAgICJJbWFnZXMiOiBbCiAgICAgICAgICAgICJodHRwczovL3MzLWFwLW5vcnRoZWFzdC0xLmFtYXpvbmF3cy5jb20vcmViaXJ0aC1meS5jb20vd29yZHByZXNzL3dwLWNvbnRlbnQvaW1hZ2VzL2NhcmRsaXN0L0lNVEQvaW1jMDAxdC0wMDFzbi5wbmciCiAgICAgICAgICBdCiAgICAgICAgfQogICAgICBdLAogICAgICAiTmFtZSI6IHsKICAgICAgICAiRU4iOiAibmV3IGdlbmVyYXRpb25zLCBVenVraSIsCiAgICAgICAgIkpQIjogIm5ldyBnZW5lcmF0aW9ucyBcdTUzNkZcdTY3MDgiCiAgICAgIH0sCiAgICAgICJUcmFpdHMiOiBbCiAgICAgICAgewogICAgICAgICAgIkVOIjogIkN1dGUiLAogICAgICAgICAgIkpQIjogIlx1MzBBRFx1MzBFNVx1MzBGQ1x1MzBDOCIKICAgICAgICB9CiAgICAgIF0sCiAgICAgICJUeXBlIjogIkNoYXJhY3RlciIsCiAgICAgICJDb2xvciI6ICJCbHVlIiwKICAgICAgIlJhcml0eSI6ICJURCIsCiAgICAgICJDb3N0IjogMiwKICAgICAgIkFUSyI6IDIsCiAgICAgICJERUYiOiA1LAogICAgICAiRWZmZWN0IjogWwogICAgICAgIHsKICAgICAgICAgICJFTiI6ICJbQVVUT10oTWVtYmVyKVtSZUNvbWJvXTpXaGVuIHRoaXMgY2hhcmFjdGVyIHN1cHBvcnRzLCB0aGUgc3VwcG9ydGVkIGNoYXJhY3RlciBnZXRzIFx1MDAyQjIvXHUwMEIxMCB1bnRpbCBlbmQgb2YgdGhhdCBhdHRhY2suIElmIHlvdSBoYXZlIDMgb3IgbW9yZSBtZW1iZXJzLCB0aGVuIGl0IGdldHMgYW4gYWRkaXRpb25hbCBcdTAwMkIxL1x1MDBCMTAuXG4oW1JlQ29tYm9dOkFjdGl2ZSBpZiB5b3UgaGF2ZSBhIFJlYmlydGggc2V0KSIsCiAgICAgICAgICAiSlAiOiAiXHUzMDEwXHU4MUVBXHUzMDExXHUzMDEwXHUzMEUxXHUzMEYzXHUzMEQwXHUzMEZDXHUzMDExXHUzMDEwUmVcdTMwQjNcdTMwRjNcdTMwRENcdTMwMTFcdUZGMUFcdTMwNTNcdTMwNkVcdTMwQURcdTMwRTNcdTMwRTlcdTMwNENcdTMwQjVcdTMwRERcdTMwRkNcdTMwQzhcdTMwNTdcdTMwNUZcdTY2NDJcdTMwMDFcdTMwNTNcdTMwNkVcdTMwQTJcdTMwQkZcdTMwQzNcdTMwQUZcdTRFMkRcdTMwMDFcdTMwQjVcdTMwRERcdTMwRkNcdTMwQzhcdTMwNTVcdTMwOENcdTMwNUZcdTMwQURcdTMwRTNcdTMwRTlcdTMwOTJcdUZGMEJcdUZGMTIvXHUwMEIxXHVGRjEwXHUzMDAyXHUzMDQyXHUzMDZBXHUzMDVGXHUzMDZFXHUzMEUxXHUzMEYzXHUzMEQwXHUzMEZDXHUzMDRDXHVGRjEzXHU2NzlBXHU0RUU1XHU0RTBBXHUzMDQ0XHUzMDhCXHUzMDZBXHUzMDg5XHUzMDAxXHUzMDU1XHUzMDg5XHUzMDZCXHVGRjBCXHVGRjExL1x1MDBCMVx1RkYxMFx1MzAwMlxuXHVGRjA4XHUzMDEwUmVcdTMwQjNcdTMwRjNcdTMwRENcdTMwMTFcdUZGMUFcdTMwNDJcdTMwNkFcdTMwNUZcdTMwNkVSZVx1MzBEMFx1MzBGQ1x1MzBCOVx1MzA0Q1x1MzBCQlx1MzBDM1x1MzBDOFx1MzA1N1x1MzA2Nlx1MzA0Mlx1MzA4Q1x1MzA3MFx1NjcwOVx1NTJCOVx1RkYwOSIKICAgICAgICB9CiAgICAgIF0sCiAgICAgICJJbWFnZXMiOiBbCiAgICAgICAgImh0dHBzOi8vczMtYXAtbm9ydGhlYXN0LTEuYW1hem9uYXdzLmNvbS9yZWJpcnRoLWZ5LmNvbS93b3JkcHJlc3Mvd3AtY29udGVudC9pbWFnZXMvY2FyZGxpc3QvSU1URC9pbWMwMDF0LTAwMS5wbmciCiAgICAgIF0sCiAgICAgICJMYW5ndWFnZSI6ICJKYXBhbmVzZSIsCiAgICAgICJTZXQiOiB7CiAgICAgICAgIlJlbGVhc2VDb2RlIjogIklNQy8wMDFUIiwKICAgICAgICAiTmFtZSI6ICJUSEUgSURPTE1AU1RFUiBDSU5ERVJFTExBIEdJUkxTIFRoZWF0ZXIgVHJpYWwgRGVjayIKICAgICAgfQogICAgfQ==";
            return JsonSerializer.Deserialize<R4UCard>(Convert.FromBase64String(base64JSON));
        }
    }
}
